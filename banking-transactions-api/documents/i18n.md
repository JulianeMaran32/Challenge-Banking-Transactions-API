# Internacionalização (i18n)

Explicação sobre como o Spring Boot lida com a internacionalização (i18n) de mensagens, incluindo a configuração de
arquivos de propriedades para diferentes idiomas.

Seguindo a convenção do Spring Boot para internacionalização (i18n) de mensagens, os arquivos devem ser nomeados como
`basename_locale.properties`. O `basename` padrão é `messages`.

Usaremos `pt_BR` para Português do Brasil e `en` para Inglês.

*As mensagens de erro lançadas nas exceções (`AccountNotFoundException`, `InsufficientFundsException`, etc.) já estão
hardcoded em português. Para uma i18n completa, essas mensagens deveriam vir deste arquivo usando `MessageSource`. No
contexto deste desafio, manter as mensagens de validação localizadas via properties já demonstra o conhecimento.*

### Como Spring Boot Lida com a Localização

O Spring Boot, utilizando o Spring Framework, configura automaticamente um `MessageSource` bean que procura por arquivos
`messages*.properties` no classpath (por padrão, na pasta `src/main/resources`).

A escolha do arquivo de idioma (`locale`) a ser usado é feita por um `LocaleResolver`. Por padrão, o Spring MVC (parte
do `spring-boot-starter-web`) utiliza o `AcceptHeaderLocaleResolver`.

### Funcionamento:

1. Quando um cliente (como um navegador ou Postman) envia uma requisição para sua API, ele pode incluir o cabeçalho
   `Accept-Language`.
2. Este cabeçalho indica os idiomas preferenciais do cliente, em ordem de preferência (ex:
   `Accept-Language: pt-BR, pt;q=0.9, en;q=0.8`).
3. O `AcceptHeaderLocaleResolver` analisa este cabeçalho e seleciona o melhor `Locale` que a aplicação suporta (ou seja,
   para o qual existem arquivos `messages_locale.properties`).
4. O `MessageSource` usa o `Locale` determinado para buscar as mensagens nos arquivos `.properties` correspondentes (
   `messages_pt_BR.properties`, `messages_en.properties`).
5. Se nenhuma correspondência exata for encontrada (ex: cliente pede `fr` e só existem `pt_BR` e `en`), o Spring tentará
   uma correspondência parcial (ex: `pt` se existir `messages_pt.properties`) ou usará a mensagem padrão definida
   diretamente no código ou em um arquivo `messages.properties` (se existir) como fallback.

### Para testar:

Use o Postman ou outra ferramenta e envie requisições para seus endpoints (`/api/accounts/transactions` ou
`/api/accounts/{accountNumber}/balance`). Inclua o cabeçalho `Accept-Language`:

* Para ver as mensagens em português: Adicione o cabeçalho `Accept-Language` com o valor `pt-BR`.
* Para ver as mensagens em inglês: Adicione o cabeçalho `Accept-Language` com o valor `en`.

Quando um erro de validação ocorrer (por exemplo, enviando um `amount` nulo ou inválido), a mensagem retornada no
`ErrorResponse` virá do arquivo `.properties` correspondente ao `Accept-Language` enviado.